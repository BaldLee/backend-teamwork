webpackJsonp([1],{Egkt:function(e,t){},GDtR:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=r("VU/8")({name:"App"},a,!1,function(e){r("s347")},null,null).exports,s=r("mtWM"),l=r.n(s),u=r("/ocq"),i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"container"},[r("el-header",{staticClass:"header"},[r("img",{attrs:{src:"localhost:8080/image-service/"+e.book.id,alt:e.book.id}})]),e._v(" "),r("el-main",[r("h4",[e._v(e._s(this.book.title)+"("+e._s(this.book.author)+")")]),e._v(" "),r("el-rate",{attrs:{colors:e.colors,disabled:e.disabled},on:{change:e.rateBook},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}})],1)],1)},staticRenderFns:[]};var c={name:"Home",data:function(){for(var e=[],t=0;t<20;t++)e.push({id:t,author:t,title:t});return{books:e,currentPage:1,allPage:0}},components:{Book:r("VU/8")({name:"Book",props:["book"],data:function(){return{image:"",rate:1,colors:["#99A9BF","#F7BA2A","#FF9900"],disabled:!1}},methods:{rateBook:function(){this.disabled=!0}},created:function(){this.disabled=!1}},i,!1,function(e){r("Qx/2")},"data-v-35376881",null).exports},created:function(){var e=this;this.axios({url:"localhost:8080/book-service/books",method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(t){e.books=t.data,e.allPage=t.data.length/3})},methods:{logout:function(){},goto:function(e){this.$router.push(e)},last:function(){this.currentPage--},next:function(){this.currentPage++}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"container"},[r("el-header",{staticClass:"header"},[r("h4",[e._v("您已登录，XXX")]),e._v(" "),r("h1",[e._v("书评网")])]),e._v(" "),r("el-container",[r("el-aside",{staticClass:"aside"},[r("el-menu",[r("el-menu-item-group",{staticClass:"items"},[r("el-menu-item",{attrs:{index:"1"},on:{click:function(t){return e.goto("/login")}}},[e._v("登录")]),e._v(" "),r("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.goto("/register")}}},[e._v("注册")]),e._v(" "),r("el-menu-item",{attrs:{index:"3"},on:{click:function(t){return e.goto("/upload")}}},[e._v("上传")])],1)],1)],1),e._v(" "),r("el-main",{staticClass:"main"},[e._l(e.books.slice(3*e.currentPage-3,3*e.currentPage),function(e){return r("ul",{staticClass:"book"},[r("li",[r("Book",{attrs:{book:e}})],1)])}),e._v(" "),r("div",{staticClass:"button"},[r("el-button",{staticClass:"last",attrs:{disabled:1===e.currentPage},on:{click:e.last}},[e._v("上一页")]),e._v(" "),r("el-button",{staticClass:"next",attrs:{disabled:e.currentPage===e.allPage},on:{click:e.next}},[e._v("下一页")])],1)],2)],1)],1)},staticRenderFns:[]};var p=r("VU/8")(c,m,!1,function(e){r("la1c")},"data-v-57af1cc4",null).exports,f=r("Xxa5"),d=r.n(f),v=r("exGp"),h=r.n(v),F={name:"login",data:function(){var e=this;return{ruleForm:{pass:"",userName:""},rules:{pass:[{validator:function(t,r,o){""===r?o(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o())},trigger:"blur"}],userName:[{validator:function(e,t,r){""===t?r(new Error("请输入用户名")):r()},trigger:"blur"}]}}},methods:{validateName:function(e,t){var r=this;return h()(d.a.mark(function o(){var a;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a="",o.next=3,r.axios({url:"localhost:8080/user-service/login/check",methods:"post",data:{usn:e,psw:t},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){a=e.data});case 3:return o.sent,o.abrupt("return","Succeed"===a);case 5:case"end":return o.stop()}},o,r)}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e||!t.validateName(t.ruleForm.userName,t.ruleForm.pass))return console.log("error submit!!"),!1;alert("登录成功！"),t.$router.push("/")})},resetForm:function(e){this.$refs[e].resetFields()}}},b={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var _=r("VU/8")(F,b,!1,function(e){r("Egkt")},"data-v-6294b7f6",null).exports,k={name:"register",data:function(){var e=this;return{ruleForm:{pass:"",checkPass:"",phone:"",email:"",name:"",userName:""},rules:{pass:[{validator:function(t,r,o){""===r?o(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o())},trigger:"blur"}],checkPass:[{validator:function(t,r,o){""===r?o(new Error("请再次输入密码")):r!==e.ruleForm.pass?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}],userName:[{validator:function(t,r,o){""===r?o(new Error("用户名不能为空")):e.repeat(r)?o(new Error("用户名已存在")):o()},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("注册成功！"),t.axios({url:"localhost:8080/user-service/signup/process",params:{username:t.ruleForm.userName,password:t.ruleForm.pass,phone:t.ruleForm.phone,email:t.ruleForm.email,address:t.ruleForm.address,realname:t.ruleForm.name},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),t.$router.push("/login")})},resetForm:function(e){this.$refs[e].resetFields()},repeat:function(e){var t=this;return h()(d.a.mark(function r(){var o;return d.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=!0,r.next=3,t.axios({url:"localhost:8080/user-service/checkUser",params:{username:e},method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){o=e.data});case 3:return r.sent,r.abrupt("return",o);case 5:case"end":return r.stop()}},r,t)}))()}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机",prop:"phone"}},[r("el-input",{attrs:{type:"tel","auto-complete":"off"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{type:"email","auto-complete":"off"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"名字",prop:"name"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("注册")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var x=r("VU/8")(k,g,!1,function(e){r("zBgi")},null,null).exports,w={name:"upload",data:function(){return{ruleForm:{title:"",author:"",id:""},rules:{title:[{validator:function(e,t,r){""===t?r(new Error("请输入书名")):r()},trigger:"blur"}]},fileList:""}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e||""===t.fileList||null===t.fileList)return console.log("error submit!!"),!1;alert("上传成功！"),t.$router.push("/")})},resetForm:function(e){this.$refs[e].resetFields()}}},$={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"书名",prop:"title"}},[r("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"编号",prop:"id"}},[r("el-input",{attrs:{type:"number","auto-complete":"off"},model:{value:e.ruleForm.id,callback:function(t){e.$set(e.ruleForm,"id",t)},expression:"ruleForm.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("el-input",{attrs:{type:"number","auto-complete":"off"},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1),e._v(" "),r("el-form-item",[r("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("上传")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var y=r("VU/8")(w,$,!1,function(e){r("GDtR")},null,null).exports;o.default.use(u.a);var P=new u.a({mode:"history",routes:[{path:"/",name:"home",component:p},{path:"/login",name:"login",components:{default:_}},{path:"/register",name:"register",components:{default:x}},{path:"/upload",name:"upload",components:{default:y}}]}),C=r("zL8q"),N=r.n(C);r("tvR6");o.default.config.productionTip=!1,o.default.prototype.axios=l.a,o.default.use(N.a),new o.default({el:"#app",router:P,components:{App:n},template:"<App/>"})},"Qx/2":function(e,t){},la1c:function(e,t){},s347:function(e,t){},tvR6:function(e,t){},zBgi:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.74443f2497a43400d9ea.js.map